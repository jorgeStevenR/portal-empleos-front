<section class="ofertas-container">
  <h2>Ofertas Laborales Disponibles</h2>

  <input
    type="text"
    placeholder="üîç Buscar empleo..."
    [(ngModel)]="filtro"
    class="search-input"
  />

  <div *ngIf="cargando" class="loading">Cargando ofertas...</div>

  <div *ngIf="!cargando && empleos.length === 0" class="no-results">
    No hay ofertas disponibles en este momento.
  </div>

  <div class="ofertas-grid" *ngIf="!cargando && empleos.length > 0">
    <div
      *ngFor="let job of empleos | filtroEmpleos:filtro"
      class="oferta-card"
    >
      <div class="empresa-header">
        <img
          [src]="job.company?.urlImg && job.company?.urlImg.trim() !== '' 
            ? job.company.urlImg 
            : 'assets/img/default-job.png'"
          alt="Logo de {{ job.company?.name || 'empresa' }}"
          class="empresa-logo"
          (error)="onImageError($event)"
        />
        <div class="empresa-info">
          <h4 class="empresa-nombre">
            {{ job.company?.name || 'Empresa no especificada' }}
          </h4>
          <span class="ubicacion">üìç {{ job.location || 'Remoto' }}</span>
        </div>
      </div>

      <div class="oferta-body">
        <h3 class="titulo">{{ job.title }}</h3>
        <p class="descripcion">
          {{
            job.description.length > 100
              ? (job.description | slice: 0:100) + '...'
              : job.description
          }}
        </p>
      </div>

      <div class="oferta-footer">
        <button class="btn-ver" (click)="verDetalle(job.idJob)">
          Ver m√°s
        </button>
      </div>
    </div>
  </div>
</section>
